<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="title" content="Happy Birthday Rimsha" />
    <title>HBD 2.0</title>

    <!-- Your styles -->
    <link rel="stylesheet" href="style.css" />

    <!-- Icons + jQuery -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
    <div id="wrapper">
        <div class="flag__birthday">
            <img src="./images/1.png" alt="" width="350" class="flag__left">
            <img src="./images/1.png" alt="" width="350" class="flag__right">
        </div>

        <div class="content">
            <div class="left">
                <div class="title">
                    <h1 class="happy">
                        <span style="--t: 4s;">H</span>
                        <span style="--t: 4.2s;">a</span>
                        <span style="--t: 4.4s;">p</span>
                        <span style="--t: 4.6s;">p</span>
                        <span style="--t: 4.8s;">y</span>
                    </h1>
                    <h1 class="birthday">
                        <span style="--t: 5s;">B</span>
                        <span style="--t: 5.2s;">i</span>
                        <span style="--t: 5.4s;">r</span>
                        <span style="--t: 5.6s;">t</span>
                        <span style="--t: 5.8s;">h</span>
                        <span style="--t: 6s;">d</span>
                        <span style="--t: 6.2s;">a</span>
                        <span style="--t: 6.4s;">y</span>
                    </h1>
                    <div class="hat">
                        <img src="./images/hat.png" alt="" width="130">
                    </div>
                </div>

                <div class="date__of__birth">
                    <span></span>
                </div>

                <div class="btn">
                    <button id="btn__letter">
                        Click here Rimsha
                        <i class="fa-regular fa-envelope"></i>
                    </button>
                </div>
            </div>

            <div class="right">
                <div class="box__account">
                    <div class="image">
                        <img src="./images/r5.JPEG" alt="">
                    </div>
                    <div class="name">
                        <i class="fa-solid fa-heart"></i>
                        <span>Rimsha</span>
                        <i class="fa-solid fa-heart"></i>
                    </div>
                    <div class="balloon_one">
                        <img width="100" src="./images/balloon1.png" alt="">
                    </div>
                    <div class="balloon_two">
                        <img width="100" src="./images/balloon2.png" alt="">
                    </div>
                </div>

                <div class="cricle">
                    <div class="text__cricle">
                        <span style="--i: 1;">h</span>
                        <span style="--i: 2;">a</span>
                        <span style="--i: 3;">p</span>
                        <span style="--i: 4;">p</span>
                        <span style="--i: 5;">y</span>
                        <span style="--i: 6;">-</span>
                        <span style="--i: 7;">b</span>
                        <span style="--i: 8;">i</span>
                        <span style="--i: 9;">r</span>
                        <span style="--i: 10;">t</span>
                        <span style="--i: 11;">h</span>
                        <span style="--i: 12;">d</span>
                        <span style="--i: 13;">a</span>
                        <span style="--i: 14;">y</span>
                        <span style="--i: 15;">-</span>
                    </div>
                    <i class="fa-solid fa-heart"></i>
                </div>
            </div>
        </div>

        <div class="decorate_star star1" style="--t: 15s;"></div>
        <div class="decorate_star star2" style="--t: 15.2s;"></div>
        <div class="decorate_star star3" style="--t: 15.4s;"></div>
        <div class="decorate_star star4" style="--t: 15.6s;"></div>
        <div class="decorate_star star5" style="--t: 15.8s;"></div>

        <div class="decorate_flower--one" style="--t: 15s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--two" style="--t: 15.3s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--three" style="--t: 15.6s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>

        <div class="decorate_bottom">
            <img src="./images/decorate.png" alt="" width="100">
        </div>
        <div class="smiley__icon">
            <img src="./images/smiley_icon.png" alt="" width="100">
        </div>

        <!-- Letter popup -->
        <div class="box__letter">
            <div class="letter__border">
                <div class="letter">
                    <div class="title__letter"></div>
                    <div class="content__letter">
                        <div class="left">
                            <img id="heart__letter" src="https://media.giphy.com/media/YKUvclrGYmDKXwtphf/giphy.gif" alt="">
                            <img class="heart heart_1" style="--t: 0.2s" width="20" src="./images/heart.png" alt="">
                            <img class="heart heart_2" style="--t: 0.4s" width="20" src="./images/heart.png" alt="">
                            <img class="heart heart_3" style="--t: 0.6s" width="20" src="./images/heart.png" alt="">
                            <img class="heart heart_4" style="--t: 0.8s" width="20" src="./images/heart.png" alt="">
                        </div>
                        <div class="right">
                            <div class="love__img">
                                <img src="https://media.giphy.com/media/m85llaN7ZkFIHtURiC/giphy.gif" alt="" width="220">
                            </div>
                            <div class="text__letter">
                                <p></p>
                            </div>
                            <img id="mewmew" width="80" src="./images/mewmew.gif" alt="">
                        </div>
                    </div>
                </div>
                <div class="close">
                    <i class="fa-solid fa-xmark"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== Background Music Bar (looping) ===== -->
    <style>
      .music-bar{
        position: fixed; right: 12px; bottom: 12px; z-index: 9999;
        display: flex; align-items: center; gap: 8px;
        background: rgba(0,0,0,.65); color:#fff; border-radius: 14px;
        padding: 8px 10px; backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      }
      .music-bar button{
        border: none; outline: none; cursor: pointer;
        background: #ffffff1a; color:#fff; border-radius: 10px; padding: 6px 10px;
      }
      .music-bar button:hover{ background:#ffffff2a; }
      .music-bar input[type="range"]{ width: 100px; accent-color:#fff; }
      .music-starter{
        position: fixed; inset:0; z-index: 9998; display:none;
        place-items:center; background: rgba(0,0,0,.6);
      }
      .music-starter button{
        font-size: 16px; padding: 12px 18px; border-radius: 12px; border:0;
        background:#ff4d6d; color:#fff; cursor:pointer;
      }
    </style>

    <!-- Hidden audio element -->
    <audio id="bgMusic"
           src="./images/hbd.mpeg"  <!-- apni gaana file ka path yahan lagao -->
           preload="auto"
           loop
           playsinline
           webkit-playsinline></audio>

    <!-- Controls -->
    <div class="music-bar" id="musicBar" aria-live="polite">
      <button id="btnPlayPause" title="Play/Pause">‚ñ∂Ô∏è</button>
      <button id="btnMute" title="Mute/Unmute">üîá</button>
      <input id="volSlider" type="range" min="0" max="1" step="0.01" value="0.6" title="Volume">
      <span id="musicStatus" style="font-size:12px;opacity:.9">ready</span>
    </div>

    <!-- Starter overlay (mobile autoplay fix) -->
    <div class="music-starter" id="musicStarter">
      <button id="startMusicBtn">Start music üîä</button>
    </div>
    <!-- ===== /Background Music Bar ===== -->

    <script>
    // Birthday page typing/letter logic
    let datetxt = "3 October 2006";
    let datatxtletter = "My Rimsha Jaan‚ù§Ô∏è. You are a very special girl to me. I always silently thank you for coming into my life. Today, I wish you all the best, lots of health, and lots of joy. I always hope we will celebrate many more birthdays like this together. Happy birthday to you.üíï";
    let titleLetter = "To you";
    let charArrDate = datetxt.split('');
    let charArrDateLetter = datatxtletter.split('');
    let charArrTitle = titleLetter.split('');
    let currentIndex = 0, currentIndexLetter = 0, currentIndexTitle = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p");

    setTimeout(function(){
        timeDatetxt = setInterval(function(){
            if(currentIndex < charArrDate.length){
                date__of__birth.textContent += charArrDate[currentIndex];
                currentIndex++;
            } else {
                let i = document.createElement("i");
                i.className = "fa-solid fa-star";
                document.querySelector(".date__of__birth").prepend(i);
                document.querySelector(".date__of__birth").appendChild(i.cloneNode(true));
                clearInterval(timeDatetxt);
            }
        },100);
    },12000);

    var intervalContent, intervalTitle;
    $("#btn__letter").on("click", function(){
        $(".box__letter").slideDown();
        setTimeout(()=>{$(".letter__border").slideDown();},1000);
        setTimeout(function(){
            intervalTitle = setInterval(function(){
                if(currentIndexTitle < charArrTitle.length){
                    document.querySelector(".title__letter").textContent += charArrTitle[currentIndexTitle];
                    let i = document.createElement("i");
                    i.className = "fa-solid fa-heart";
                    document.querySelector(".title__letter").appendChild(i);
                    currentIndexTitle++;
                } else { clearInterval(intervalTitle); }
            },100);
        },2000);
        setTimeout(function(){
            document.querySelector("#heart__letter").classList.add("animationOp");
            document.querySelector(".love__img").classList.add("animationOp");
            document.querySelector("#mewmew").classList.add("animationOp");
        },2800);
        setTimeout(function(){
            document.querySelectorAll(".heart").forEach((item)=> item.classList.add("animation"));
        },3500);
        setTimeout(function(){
            intervalContent = setInterval(function(){
                if(currentIndexLetter < charArrDateLetter.length){
                    text__letter.textContent += charArrDateLetter[currentIndexLetter];
                    currentIndexLetter++;
                } else { clearInterval(intervalContent); }
            },50);
        },6000);
    });

    $(".close").on("click", function(){
        clearInterval(intervalContent);
        document.querySelector(".title__letter").textContent = "";
        text__letter.textContent = "";
        currentIndexLetter = 0; currentIndexTitle = 0;
        document.querySelector("#heart__letter").classList.remove("animationOp");
        document.querySelector(".love__img").classList.remove("animationOp");
        document.querySelector("#mewmew").classList.remove("animationOp");
        document.querySelectorAll(".heart").forEach((item)=> item.classList.remove("animation"));
        $(".box__letter").slideUp(); $(".letter__border").slideUp();
    });

    // ===== Music controls logic =====
    (function(){
      const audio = document.getElementById('bgMusic');
      const btnPP = document.getElementById('btnPlayPause');
      const btnMute = document.getElementById('btnMute');
      const vol = document.getElementById('volSlider');
      const statusEl = document.getElementById('musicStatus');
      const starter = document.getElementById('musicStarter');
      const startBtn = document.getElementById('startMusicBtn');

      // restore settings
      const savedVol = localStorage.getItem('music_vol');
      const savedMute = localStorage.getItem('music_mute') === '1';
      if(savedVol !== null){ audio.volume = parseFloat(savedVol); vol.value = audio.volume; } else { audio.volume = 0.6; }
      audio.muted = savedMute;

      const tryAutoplay = async () => {
        try {
          audio.muted = true; // safe start
          await audio.play();
          setTimeout(()=>{ if(!savedMute) audio.muted = false; updateUI(); }, 150);
          localStorage.setItem('music_autoplay_ok','1');
          starter.style.display = 'none';
          updateUI('playing');
        } catch(e){
          starter.style.display = 'grid';
          updateUI('tap to start');
        }
      };
      tryAutoplay();

      audio.addEventListener('ended', ()=>{ audio.currentTime = 0; audio.play(); });

      btnPP.addEventListener('click', async () => {
        if(audio.paused){ try{ await audio.play(); }catch{} } else { audio.pause(); }
        updateUI();
      });

      btnMute.addEventListener('click', () => {
        audio.muted = !audio.muted;
        localStorage.setItem('music_mute', audio.muted ? '1' : '0');
        updateUI();
      });

      vol.addEventListener('input', () => {
        audio.volume = parseFloat(vol.value);
        localStorage.setItem('music_vol', audio.volume.toString());
        if(audio.volume === 0) audio.muted = true;
        updateUI();
      });

      startBtn.addEventListener('click', async () => {
        try{
          audio.muted = false;
          await audio.play();
          localStorage.setItem('music_autoplay_ok','1');
          starter.style.display = 'none';
          updateUI('playing');
        }catch(e){
          audio.muted = true;
          try{ await audio.play(); starter.style.display='none'; updateUI('playing'); }catch{}
        }
      });

      function updateUI(extra){
        btnPP.textContent = audio.paused ? '‚ñ∂Ô∏è' : '‚è∏Ô∏è';
        btnMute.textContent = audio.muted ? 'üîá' : 'üîä';
        statusEl.textContent = extra || (audio.paused ? 'paused' : (audio.muted ? 'playing (muted)' : 'playing'));
      }

      document.addEventListener('visibilitychange', () => {
        if(document.visibilityState === 'visible' && audio.paused){
          audio.play().catch(()=>{});
        }
      });
    })();
    // ===== /Music controls logic =====
    </script>
</body>
</html>

